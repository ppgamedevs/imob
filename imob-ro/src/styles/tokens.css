/**
 * Design Tokens v2 - Step 12
 * Single source of truth for colors, spacing, typography, motion, and theming.
 * Supports dark mode, brand override, and reduced motion.
 */

:root {
  /* === Colors - Light Mode (default) === */
  --bg: 250 250 250; /* #fafafa */
  --surface: 255 255 255; /* #ffffff */
  --surface-2: 249 249 249; /* #f9f9f9 */
  --border: 229 229 229; /* #e5e5e5 */
  --text: 23 23 23; /* #171717 */
  --muted: 115 115 115; /* #737373 */

  /* Brand */
  --primary: 37 99 235; /* #2563eb - blue */
  --primary-contrast: 255 255 255; /* white */

  /* Semantic */
  --success: 34 197 94; /* #22c55e - green */
  --warn: 251 146 60; /* #fb923c - orange */
  --danger: 239 68 68; /* #ef4444 - red */

  /* Special */
  --ad-tint: 147 51 234; /* #9333ea - purple for sponsored */

  /* Charts */
  --chart-1: 37 99 235; /* blue */
  --chart-2: 34 197 94; /* green */
  --chart-3: 251 146 60; /* orange */
  --chart-4: 239 68 68; /* red */
  --chart-5: 168 85 247; /* purple */
  --chart-6: 236 72 153; /* pink */

  /* === Radii === */
  --r-sm: 10px;
  --r-md: 16px;
  --r-xl: 24px;

  /* === Shadows (Elevation) === */
  --elev0: 0 0 0 1px rgb(var(--border) / 0.1);
  --elev1: 0 1px 2px 0 rgb(0 0 0 / 0.05), 0 0 0 1px rgb(var(--border) / 0.1);
  --elev2:
    0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1),
    0 0 0 1px rgb(var(--border) / 0.1);
  --elev3:
    0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1),
    0 0 0 1px rgb(var(--border) / 0.1);

  /* === Typography === */
  --font-sans:
    ui-sans-serif, Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial,
    "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  --font-mono: ui-monospace, "SF Mono", Menlo, Monaco, Consolas, "Liberation Mono", monospace;

  --fs-xs: 0.75rem; /* 12px */
  --fs-sm: 0.875rem; /* 14px */
  --fs-base: 1rem; /* 16px */
  --fs-lg: 1.125rem; /* 18px */
  --fs-xl: 1.25rem; /* 20px */
  --fs-2xl: 1.5rem; /* 24px */
  --fs-4xl: 2.25rem; /* 36px */
  --fs-6xl: 3.5rem; /* 56px */

  --lh-tight: 1.2;
  --lh-normal: 1.5;
  --lh-relaxed: 1.75;

  /* === Motion === */
  --ease-smooth: cubic-bezier(0.22, 0.61, 0.36, 1);
  --duration-fast: 120ms;
  --duration-base: 200ms;
  --duration-slow: 300ms;

  /* === Spacing === */
  --header-height: 64px;
  --page-max-width: 1200px;
  --section-gap: 32px;
  --card-gap: 16px;

  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-7: 28px;
  --space-8: 32px;

  /* === Brand Override (initially empty, set via [data-brand]) === */
  --brand-color: rgb(var(--primary));
  --brand-logo-url: none;

  /* === Ad Tokens === */
  --ad-bg: rgb(var(--surface-2));
  --ad-border: rgb(var(--border));
  --ad-label: rgb(var(--ad-tint));
}

/* === Dark Mode === */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    --bg: 10 10 10; /* #0a0a0a */
    --surface: 23 23 23; /* #171717 */
    --surface-2: 38 38 38; /* #262626 */
    --border: 64 64 64; /* #404040 */
    --text: 250 250 250; /* #fafafa */
    --muted: 163 163 163; /* #a3a3a3 */

    --primary: 59 130 246; /* #3b82f6 - lighter blue */
    --primary-contrast: 23 23 23; /* dark text */

    --success: 74 222 128; /* #4ade80 */
    --warn: 251 191 36; /* #fbbf24 */
    --danger: 248 113 113; /* #f87171 */

    --ad-tint: 192 132 252; /* #c084fc - lighter purple */

    /* Stronger shadows for dark mode */
    --elev0: 0 0 0 1px rgb(var(--border) / 0.2);
    --elev1: 0 1px 2px 0 rgb(0 0 0 / 0.3), 0 0 0 1px rgb(var(--border) / 0.2);
    --elev2:
      0 4px 6px -1px rgb(0 0 0 / 0.4), 0 2px 4px -2px rgb(0 0 0 / 0.3),
      0 0 0 1px rgb(var(--border) / 0.2);
    --elev3:
      0 10px 15px -3px rgb(0 0 0 / 0.5), 0 4px 6px -4px rgb(0 0 0 / 0.4),
      0 0 0 1px rgb(var(--border) / 0.2);

    --ad-bg: rgb(var(--surface-2));
    --ad-border: rgb(var(--border));
    --ad-label: rgb(var(--ad-tint));
  }
}

/* === Explicit Dark Theme Class === */
.theme-dark,
[data-theme="dark"] {
  --bg: 10 10 10;
  --surface: 23 23 23;
  --surface-2: 38 38 38;
  --border: 64 64 64;
  --text: 250 250 250;
  --muted: 163 163 163;

  --primary: 59 130 246;
  --primary-contrast: 23 23 23;

  --success: 74 222 128;
  --warn: 251 191 36;
  --danger: 248 113 113;

  --ad-tint: 192 132 252;

  --elev0: 0 0 0 1px rgb(var(--border) / 0.2);
  --elev1: 0 1px 2px 0 rgb(0 0 0 / 0.3), 0 0 0 1px rgb(var(--border) / 0.2);
  --elev2:
    0 4px 6px -1px rgb(0 0 0 / 0.4), 0 2px 4px -2px rgb(0 0 0 / 0.3),
    0 0 0 1px rgb(var(--border) / 0.2);
  --elev3:
    0 10px 15px -3px rgb(0 0 0 / 0.5), 0 4px 6px -4px rgb(0 0 0 / 0.4),
    0 0 0 1px rgb(var(--border) / 0.2);
}

/* === Brand Override Hook === */
[data-brand] {
  --primary: var(--brand-color);
}

[data-brand][data-logo-url] {
  --brand-logo-url: var(--data-logo-url);
}

/* === Reduced Motion === */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* === Focus Styles === */
:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px color-mix(in oklab, rgb(var(--primary)), white 20%);
  border-radius: var(--r-sm);
}

/* === Accessibility: Ensure interactive targets are minimum size === */
button:not(.btn-sm),
a:not(.link-sm),
input,
select,
textarea {
  min-width: 44px;
  min-height: 44px;
}

/* === Density Modes === */
body.density-compact {
  --space-1: 3px;
  --space-2: 6px;
  --space-3: 9px;
  --space-4: 12px;
  --space-5: 15px;
  --space-6: 18px;
  --space-7: 21px;
  --space-8: 24px;
}
